[gd_scene load_steps=18 format=3 uid="uid://exdvrk6d1y50"]

[ext_resource type="Script" uid="uid://b13ff0h1qb1co" path="res://scripts/GameManager.gd" id="1"]
[ext_resource type="Script" uid="uid://d0erlf4kief8k" path="res://scripts/Player.gd" id="2"]
[ext_resource type="Script" uid="uid://8vmi5231rqw0" path="res://scripts/HUD.gd" id="3"]
[ext_resource type="Script" uid="uid://buwke6bs0gf2l" path="res://scripts/ParallaxBackground.gd" id="4"]
[ext_resource type="Script" uid="uid://bpb7vgnc2f8ge" path="res://scripts/HazardSpawner.gd" id="5"]
[ext_resource type="Script" uid="uid://dvqorkkkaucvy" path="res://scripts/Ground.gd" id="6"]
[ext_resource type="PackedScene" uid="uid://gnu5m3sym8rh" path="res://scenes/Plane.tscn" id="7"]
[ext_resource type="PackedScene" uid="uid://unp18d8kk0t6" path="res://scenes/Cloud.tscn" id="8"]
[ext_resource type="PackedScene" uid="uid://4jq773kqbu7w" path="res://scenes/PowerUp.tscn" id="9"]
[ext_resource type="Texture2D" uid="uid://7dr0deucyi20" path="res://assets/sprites/background_sky_gradient.webp" id="10"]
[ext_resource type="Texture2D" uid="uid://bhulmjophjdep" path="res://assets/sprites/clouds_sparse_middle_layer.webp" id="11"]
[ext_resource type="Texture2D" uid="uid://baspitedaws4r" path="res://assets/sprites/clouds_dramatic_foreground.webp" id="12"]
[ext_resource type="Texture2D" uid="uid://cr7yhlnhxgnqr" path="res://assets/sprites/skydiver.webp" id="13"]
[ext_resource type="Texture2D" uid="uid://bw6xiklmyhnpr" path="res://assets/sprites/parachute.webp" id="14"]
[ext_resource type="PackedScene" uid="uid://bxf8gv3q2h1nl" path="res://scenes/DevConsole.tscn" id="15"]
[ext_resource type="Script" uid="uid://cjkw7x4m2p9s1" path="res://scripts/ScreenShake.gd" id="16"]
[ext_resource type="Script" uid="uid://dk8w3x7m5n2q1" path="res://scripts/ParticleManager.gd" id="17"]

[sub_resource type="RectangleShape2D" id="1"]
size = Vector2(32, 48)

[sub_resource type="RectangleShape2D" id="2"]
size = Vector2(360, 20)

[node name="Main" type="Node2D"]

[node name="GameManager" type="Node" parent="."]
script = ExtResource("1")

[node name="SolidBlueBackground" type="ColorRect" parent="."]
z_index = -1000
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
color = Color(0.216, 0.498, 0.910, 1)

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]
script = ExtResource("4")

[node name="BackgroundLayer" type="ParallaxLayer" parent="ParallaxBackground"]
z_index = -50
motion_scale = Vector2(1, 0.2)
motion_mirroring = Vector2(0, 1024)

[node name="BlueBackground" type="Sprite2D" parent="ParallaxBackground/BackgroundLayer"]
position = Vector2(180, 320)
texture = ExtResource("10")

[node name="BlueBackground2" type="Sprite2D" parent="ParallaxBackground/BackgroundLayer"]
position = Vector2(180, -700)
texture = ExtResource("10")

[node name="BlueBackground3" type="Sprite2D" parent="ParallaxBackground/BackgroundLayer"]
position = Vector2(180, -200)
texture = ExtResource("10")

[node name="FarCloudsLayer" type="ParallaxLayer" parent="ParallaxBackground"]
z_index = -40
motion_scale = Vector2(1, 0.4)
motion_mirroring = Vector2(0, 1024)

[node name="FarClouds" type="Sprite2D" parent="ParallaxBackground/FarCloudsLayer"]
position = Vector2(180, 320)
texture = ExtResource("11")

[node name="FarClouds2" type="Sprite2D" parent="ParallaxBackground/FarCloudsLayer"]
position = Vector2(180, -200)
texture = ExtResource("11")

[node name="NearCloudsLayer" type="ParallaxLayer" parent="ParallaxBackground"]
z_index = -30
motion_scale = Vector2(1, 0.6)
motion_mirroring = Vector2(0, 1024)

[node name="NearClouds" type="Sprite2D" parent="ParallaxBackground/NearCloudsLayer"]
position = Vector2(180, 320)
texture = ExtResource("12")

[node name="NearClouds2" type="Sprite2D" parent="ParallaxBackground/NearCloudsLayer"]
position = Vector2(180, -200)
texture = ExtResource("12")

[node name="GameCamera" type="Camera2D" parent="."]
position = Vector2(180, -200)

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(180, -200)
script = ExtResource("2")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
shape = SubResource("1")

[node name="PlayerSprite" type="Sprite2D" parent="Player"]
texture = ExtResource("13")

[node name="PlayerLabel" type="Label" parent="Player"]
offset_left = -20.0
offset_top = 30.0
offset_right = 20.0
offset_bottom = 50.0
text = "PLAYER"
horizontal_alignment = 1

[node name="ParachuteSprite" type="Sprite2D" parent="Player"]
visible = false
z_index = -1
position = Vector2(0, -40)
texture = ExtResource("14")

[node name="ParachuteLabel" type="Label" parent="Player"]
visible = false
offset_left = -30.0
offset_top = -70.0
offset_right = 30.0
offset_bottom = -50.0
text = "PARACHUTE"
horizontal_alignment = 1

[node name="Area2D" type="Area2D" parent="Player"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player/Area2D"]
shape = SubResource("1")

[node name="GroundDetector" type="Area2D" parent="."]
position = Vector2(180, 27000)
script = ExtResource("6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="GroundDetector"]
shape = SubResource("2")

[node name="GroundLabel" type="Label" parent="GroundDetector"]
offset_left = -50.0
offset_top = -40.0
offset_right = 50.0
offset_bottom = -20.0
text = "GOAL"
horizontal_alignment = 1

[node name="Ground" type="StaticBody2D" parent="."]
position = Vector2(180, 27000)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Ground"]
shape = SubResource("2")

[node name="GroundSprite" type="ColorRect" parent="Ground"]
offset_left = -180.0
offset_top = -50.0
offset_right = 180.0
offset_bottom = 1000.0
color = Color(0.4, 0.2, 0, 1)

[node name="HazardSpawner" type="Node2D" parent="."]
script = ExtResource("5")
plane_scene = ExtResource("7")
cloud_scene = ExtResource("8")
powerup_scene = ExtResource("9")

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("3")

[node name="TimeLabel" type="Label" parent="HUD"]
offset_left = 10.0
offset_top = 10.0
offset_right = 200.0
offset_bottom = 36.0
text = "Time: 00:00.00"

[node name="LivesLabel" type="Label" parent="HUD"]
offset_left = 10.0
offset_top = 40.0
offset_right = 200.0
offset_bottom = 66.0
text = "Lives: 3"

[node name="ParachuteLabel" type="Label" parent="HUD"]
offset_left = 10.0
offset_top = 70.0
offset_right = 200.0
offset_bottom = 96.0
text = "Parachute: READY"

[node name="ScoreLabel" type="Label" parent="HUD"]
offset_left = 170.0
offset_top = 10.0
offset_right = 350.0
offset_bottom = 36.0
text = "Score: 0"

[node name="ComboLabel" type="Label" parent="HUD"]
visible = false
offset_left = 170.0
offset_top = 40.0
offset_right = 350.0
offset_bottom = 66.0
theme_override_colors/font_color = Color(1, 1, 0, 1)
text = "Combo: 0x"

[node name="ControlsLabel" type="Label" parent="HUD"]
offset_left = 10.0
offset_top = 560.0
offset_right = 350.0
offset_bottom = 630.0
text = "Controls: Arrow/WASD = Move, Space = Parachute, R = Reset, ` = Dev Console"
autowrap_mode = 2

[node name="DevConsoleTestButton" type="Button" parent="HUD"]
offset_left = 280.0
offset_top = 540.0
offset_right = 350.0
offset_bottom = 560.0
text = "Console"

[node name="ScreenShake" type="Node" parent="."]
script = ExtResource("16")

[node name="ParticleManager" type="Node2D" parent="."]
script = ExtResource("17")

[node name="DevConsole" parent="." instance=ExtResource("15")]

[connection signal="hit_hazard" from="Player" to="HUD" method="_on_player_hit_hazard"]
[connection signal="lives_changed" from="Player" to="HUD" method="_on_lives_changed"]
[connection signal="parachute_toggled" from="Player" to="HUD" method="_on_parachute_toggled"]
[connection signal="pressed" from="HUD/DevConsoleTestButton" to="DevConsole" method="toggle_console"]
[connection signal="area_entered" from="Player/Area2D" to="Player" method="_on_area_2d_area_entered"]
[connection signal="body_entered" from="GroundDetector" to="GroundDetector" method="_on_body_entered"]
[connection signal="player_landed" from="GroundDetector" to="GameManager" method="_on_ground_player_landed"]
